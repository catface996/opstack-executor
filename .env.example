# AWS Bedrock 认证配置示例
# 复制此文件为 .env 并填入实际值
#
# 认证优先级：API Key > AK/SK > IAM Role

# ============================================================================
# 认证方式 1: API Key 认证（最高优先级）
# ============================================================================
# 适用场景：本地开发、测试、调试
# 取消下面的注释并填入您的 API Key

# AWS_BEDROCK_API_KEY=your-api-key-here

# ============================================================================
# 认证方式 2: AK/SK 认证（中等优先级）
# ============================================================================
# 适用场景：跨账号访问、需要显式凭证的场景
# 取消下面的注释并填入您的 Access Key 和 Secret Key

# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# ============================================================================
# 认证方式 3: IAM Role 认证（最低优先级）
# ============================================================================
# 适用场景：AWS Lambda、EC2、ECS 等 AWS 环境部署
# 取消下面的注释以启用 IAM Role 认证

# USE_IAM_ROLE=true

# ============================================================================
# 通用配置
# ============================================================================

# AWS Region（必需，特别是在使用 IAM Role 认证时）
AWS_REGION=us-east-1

# AWS Bedrock 模型 ID
AWS_BEDROCK_MODEL_ID=us.anthropic.claude-sonnet-4-20250514-v1:0

# ============================================================================
# Database Configuration
# ============================================================================

# 方式 1: 完整数据库 URL（优先使用）
# DATABASE_URL=mysql+pymysql://root:root123@localhost:3306/hierarchical_agents

# 方式 2: 分别配置各项（如果未设置 DATABASE_URL）
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_NAME=hierarchical_agents
DB_USER=root
DB_PASSWORD=root123

# 调试模式（打印 SQL 语句）
# DB_ECHO=true

# ============================================================================
# Redis Configuration (for event streaming)
# ============================================================================

# Redis 连接 URL
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# HTTP Server Configuration (for EC2 deployment)
# ============================================================================

# Server port (default: 8080)
# PORT=8080

# Server host (default: 0.0.0.0, listens on all interfaces)
# HOST=0.0.0.0

# Debug mode (default: false)
# DEBUG=false

# ============================================================================
# 认证模式说明
# ============================================================================
#
# 系统会根据配置自动选择认证方式（按优先级）：
#
# 1. API Key 认证（最高优先级）
#    - 如果设置了 AWS_BEDROCK_API_KEY，优先使用
#    - 适合本地开发和调试
#    - 需要手动管理 API Key
#
# 2. AK/SK 认证（中等优先级）
#    - 如果设置了 AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY
#    - 适合跨账号访问或需要显式凭证的场景
#    - 凭证管理更灵活
#
# 3. IAM Role 认证（最低优先级）
#    - 如果设置了 USE_IAM_ROLE=true，或者在 AWS Lambda 环境中
#    - 适合 AWS 环境部署
#    - 最安全，无需管理任何密钥
#    - 需要为 Lambda/EC2 配置适当的 IAM 角色权限
#
# 4. 自动检测：如果在 AWS Lambda 环境中运行且未配置任何凭证，系统自动切换到 IAM Role 认证
# 
# ============================================================================
# IAM Role 权限要求
# ============================================================================
# 
# 如果使用 IAM Role 认证，确保您的 Lambda 函数或 EC2 实例的 IAM 角色具有以下权限：
# 
# {
#   "Version": "2012-10-17",
#   "Statement": [
#     {
#       "Effect": "Allow",
#       "Action": [
#         "bedrock:InvokeModel",
#         "bedrock:InvokeModelWithResponseStream"
#       ],
#       "Resource": "*"
#     }
#   ]
# }
# 
# ============================================================================
